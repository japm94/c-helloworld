<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>japm94</groupId>
  <artifactId>SAMPLE</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>pom</packaging>
  <name>SAMPLE</name>
  <profiles>

    <profile>
      <id>RELEASE</id>
      <activation>
        <activeByDefault>true</activeByDefault>
        <property>
          <name>release</name>
        </property>
      </activation>
      <build>
        <testSourceDirectory>src/test/java</testSourceDirectory>
        
        <!-- To define the plugin version in your parent POM -->
        <pluginManagement>
          <plugins>
            <plugin>
              <groupId>org.codehaus.mojo</groupId>
              <artifactId>cxx-maven-plugin</artifactId>
              <version>0.0.5-SNAPSHOT</version>
            </plugin>
          </plugins>
        </pluginManagement>
        <plugins>
          
              <execution>
                <id>make</id>
                <!--<phase>compile</phase>-->
                <!-- compile is make goal default phase -->
                <goals>
                  <goal>make</goal>
                </goals>
                <configuration>
                  <projectDir>${project.basedir}/builds/Unix Makefiles/RELEASE</projectDir>
                </configuration>
              </execution>
              <execution>
                <id>unit-test</id>
                <!--<phase>test</phase>-->
                <!-- test is xunit goal default phase -->
                <goals>
                  <goal>xunit</goal>
                </goals>
                <configuration>
                  <executable>sh</executable>
                  <workingDir>${project.basedir}/builds/Unix Makefiles/RELEASE/bin</workingDir>
                  <commandArgs>"${project.basedir}/scripts/execUnitTest.sh" ./SAMPLE-PROJECT-TESTS "${project.basedir}/xunit-reports/xunit-result-SAMPLE.xml"</commandArgs>
                </configuration>
              </execution>
              <execution>
                <id>cppcheck</id>
                <!--<phase>test</phase>-->
                <!-- test is cppcheck goal default phase -->
                <goals>
                  <goal>cppcheck</goal>
                </goals>
                <configuration>
                  <!-- We use main configuration node for sourceDir -->
                  <!-- <sourceDirs>
                    <sourceDir>sources/application</sourceDir>
                    <sourceDir>sources/utils</sourceDir>
                    <sourceDir>sources/tests</sourceDir>
                  </sourceDirs>-->
                  <includeDirs>
                    <includeDir>${project.basedir}/builds/Unix Makefiles/RELEASE/application</includeDir>
                  </includeDirs>

                  <miscArgs>
                    <miscArg>-j3</miscArg>
                  </miscArgs>

                  <reportIdentifier>SAMPLE</reportIdentifier>
                </configuration>
              </execution>
              
              <execution>
                <id>veraxx</id>
                <!--<phase>test</phase>-->
                <!-- test is vera++ goal default phase -->
                <goals>
                  <goal>veraxx</goal>
                </goals>
                <configuration>
                  <!-- We use main configuration node for sourceDir -->
                  <!-- <sourceDirs>
                    <sourceDir>sources/application</sourceDir>
                    <sourceDir>sources/utils</sourceDir>
                    <sourceDir>sources/tests</sourceDir>
                  </sourceDirs> -->
                  <reportIdentifier>SAMPLE</reportIdentifier>
                </configuration>
              </execution>
            </executions>
<!-- main configuration node is mainly used by sonar cxx sensor -->
            <configuration>
<!-- <sourceDirs> is used by cppcheck and veraxx goal to identify source files -->
<!-- <sourceDirs> is also used by sonar cxx sensor to identify source files -->
              <sourceDirs>
                <sourceDir>sources/application</sourceDir>
                <sourceDir>sources/utils</sourceDir>
                <sourceDir>sources/tests</sourceDir>
              </sourceDirs>
            </configuration>

          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>COVERAGE</id>
      <activation>
        <property>
          <name>coverage</name>
        </property>
      </activation>
     <build>
        <!-- To define the plugin version in your parent POM -->
        <pluginManagement>
          <plugins>
            <plugin>
              <groupId>org.codehaus.mojo</groupId>
              <artifactId>cxx-maven-plugin</artifactId>
              <version>0.0.5-SNAPSHOT</version>
            </plugin>
          </plugins>
        </pluginManagement>

        <plugins>
          <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>cxx-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>clean</id>
                <phase>clean</phase>
                <goals>
                  <goal>launch</goal>
                </goals>
                <configuration>
                  <executable>rm</executable>
                  <commandArgs>-rf "${project.basedir}/builds/Unix Makefiles/COVERAGE"</commandArgs>
                </configuration>
              </execution>
              <execution>
                <id>cmake</id>
                <!--<phase>initialize</phase> -->
                <!-- initialize is cmake goal default phase -->
                <goals>
                  <goal>cmake</goal>
                </goals>
                <configuration>
                  <!-- ${project.basedir} is cmake projectDir default value -->
                  <projectDir>${project.basedir}/sources</projectDir>
                  <!-- ${project.basedir} is cmake outsourceDir default value -->
                  <outsourceDir>${project.basedir}/builds/Unix Makefiles/COVERAGE</outsourceDir>
                  <generator>"Unix Makefiles"</generator>
                  <commandArgs>-DPROJECT_TARGET="COVERAGE" -DEXECUTABLE_NAME="SAMPLE" -DPROJECT_LANGUAGE="en" -DCMAKE_BUILD_TYPE="Coverage"</commandArgs>
                </configuration>
              </execution>
              <execution>
                <id>make</id>
                <!--<phase>compile</phase>-->
                <!-- compile is make goal default phase -->
                <goals>
                  <goal>make</goal>
                </goals>
                <configuration>
                  <projectDir>${project.basedir}/builds/Unix Makefiles/COVERAGE</projectDir>
                </configuration>
              </execution>
              <execution>
                <id>coverage-test</id>
                <!--<phase>test</phase>-->
                <!-- test is coverage goal default phase -->
                <goals>
                  <goal>coverage</goal>
                </goals>
                <configuration>
                  <!-- gcovr default args are -x -d -->
                  <gcovrArgs>-r ${project.basedir} -x -d -e ".*QtCore.*" -e ".*QtGui.*" -e ".*QtTest.*" </gcovrArgs>
                  <executable>sh</executable>
                  <workingDir>${project.basedir}/builds/Unix Makefiles/COVERAGE</workingDir>
                  <commandArgs>"${project.basedir}/scripts/execUnitTest.sh" ./bin/SAMPLE-PROJECT-TESTS "${project.basedir}/xunit-reports/xunit-result-SAMPLE.xml"</commandArgs>
                  <reportIdentifier>SAMPLE</reportIdentifier>
                </configuration>
              </execution>
              <execution>
                <id>valgrind-test</id>
                <!--<phase>test</phase>-->
                <!-- test is valgrind goal default phase -->
                <goals>
                  <goal>valgrind</goal>
                </goals>
                <configuration>
                  <workingDir>${project.basedir}/builds/Unix Makefiles/COVERAGE</workingDir>
                  <instrumentedExecutablePath>${project.basedir}/builds/Unix Makefiles/COVERAGE/bin/SAMPLE-PROJECT-TESTS</instrumentedExecutablePath>
                  <reportIdentifier>SAMPLE</reportIdentifier>
                </configuration>
              </execution>

              <execution>
                <id>cppcheck</id>
                <!--<phase>test</phase>-->
                <!-- test is cppcheck goal default phase -->
                <goals>
                  <goal>cppcheck</goal>
                </goals>
                <configuration>
                  <includeDirs>
                    <includeDir>${project.basedir}/builds/Unix Makefiles/COVERAGE/application</includeDir>
                  </includeDirs>
                  <reportIdentifier>SAMPLE</reportIdentifier>
                </configuration>
              </execution>
              
              <execution>
                <id>veraxx</id>
                <!--<phase>test</phase>-->
                <!-- test is vera++ goal default phase -->
                <goals>
                  <goal>veraxx</goal>
                </goals>
                <configuration>
                  <reportIdentifier>SAMPLE</reportIdentifier>
                </configuration>
              </execution>

            </executions>
<!-- main configuration node is mainly used by sonar cxx sensor -->
            <configuration>
<!-- <sourceDirs> is used by cppcheck and veraxx goal to identify source files -->
<!-- <sourceDirs> is also used by sonar cxx sensor to identify source files -->
              <sourceDirs>
                <sourceDir>sources/application</sourceDir>
                <sourceDir>sources/utils</sourceDir>
                <sourceDir>sources/tests</sourceDir>
              </sourceDirs>
            </configuration>

          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>WINCOVERAGE</id>
      <activation>
        <property>
          <name>wincoverage</name>
        </property>
      </activation>
     <build>
        <!-- To define the plugin version in your parent POM -->
        <pluginManagement>
          <plugins>
            <plugin>
              <groupId>org.codehaus.mojo</groupId>
              <artifactId>cxx-maven-plugin</artifactId>
              <version>0.0.5-SNAPSHOT</version>
            </plugin>
          </plugins>
        </pluginManagement>

        <plugins>
          <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>cxx-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>clean</id>
                <phase>clean</phase>
                <goals>
                  <goal>launch</goal>
                </goals>
                <configuration>
                  <executable>rm</executable>
                  <commandArgs>-rf "${project.basedir}/builds/Unix Makefiles/COVERAGE"</commandArgs>
                </configuration>
              </execution>
              <execution>
                <id>cmake</id>
                <!--<phase>initialize</phase> -->
                <!-- initialize is cmake goal default phase -->
                <goals>
                  <goal>cmake</goal>
                </goals>
                <configuration>
                  <!-- ${project.basedir} is cmake projectDir default value -->
                  <projectDir>${project.basedir}/sources</projectDir>
                  <!-- ${project.basedir} is cmake outsourceDir default value -->
                  <outsourceDir>${project.basedir}/builds/Unix Makefiles/COVERAGE</outsourceDir>
                  <generator>"MinGW Makefiles"</generator>
                  <commandArgs>-DPROJECT_TARGET="COVERAGE" -DEXECUTABLE_NAME="SAMPLE" -DPROJECT_LANGUAGE="en" -DCMAKE_BUILD_TYPE="Coverage"</commandArgs>
                </configuration>
              </execution>
              <execution>
                <id>make</id>
                <!--<phase>compile</phase>-->
                <!-- compile is make goal default phase -->
                <goals>
                  <goal>make</goal>
                </goals>
                <configuration>
                  <makecommandPerOS>
                    <WindowsXP>mingw32-make</WindowsXP>
                    <Windows7>mingw32-make</Windows7>
                  </makecommandPerOS>
                  <projectDir>${project.basedir}/builds/Unix Makefiles/COVERAGE</projectDir>
                </configuration>
              </execution>
              <execution>
                <id>coverage-test</id>
                <!--<phase>test</phase>-->
                <!-- test is coverage goal default phase -->
                <goals>
                  <goal>coverage</goal>
                </goals>
                <configuration>
                  <!-- gcovr default args are -x -d -->
                  <gcovrArgs>-r ${project.basedir} -x -d -e ".*QtCore.*" -e ".*QtGui.*" -e ".*QtTest.*" </gcovrArgs>
                  <executable>bash</executable>
                  <workingDir>${project.basedir}/builds/Unix Makefiles/COVERAGE</workingDir>
                  <commandArgs>"${project.basedir}/scripts/execUnitTest.sh" ./bin/SAMPLE-PROJECT-TESTS "${project.basedir}/xunit-reports/xunit-result-SAMPLE.xml"</commandArgs>
                  <reportIdentifier>SAMPLE</reportIdentifier>
                </configuration>
              </execution>
             </executions>
<!-- main configuration node is mainly used by sonar cxx sensor -->
            <configuration>
<!-- <sourceDirs> is used by cppcheck and veraxx goal to identify source files -->
<!-- <sourceDirs> is also used by sonar cxx sensor to identify source files -->
              <sourceDirs>
                <sourceDir>sources/application</sourceDir>
                <sourceDir>sources/utils</sourceDir>
                <sourceDir>sources/tests</sourceDir>
              </sourceDirs>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>


    <profile>
      <id>WINRELEASE</id>
      <activation>
        <property>
          <name>winrelease</name>
        </property>
      </activation>
     <build>
        <!-- To define the plugin version in your parent POM -->
        <pluginManagement>
          <plugins>
            <plugin>
              <groupId>org.codehaus.mojo</groupId>
              <artifactId>cxx-maven-plugin</artifactId>
              <version>0.0.5-SNAPSHOT</version>
            </plugin>
          </plugins>
        </pluginManagement>

        <plugins>
          <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>cxx-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>clean</id>
                <phase>clean</phase>
                <goals>
                  <goal>launch</goal>
                </goals>
                <configuration>
                  <executable>rm</executable>
                  <commandArgs>-rf "${project.basedir}/builds/Unix Makefiles/RELEASE"</commandArgs>
                </configuration>
              </execution>
              <execution>
                <id>cmake</id>
                <!--<phase>initialize</phase> -->
                <!-- initialize is cmake goal default phase -->
                <goals>
                  <goal>cmake</goal>
                </goals>
                <configuration>
                  <!-- ${project.basedir} is cmake projectDir default value -->
                  <projectDir>${project.basedir}/sources</projectDir>
                  <!-- ${project.basedir} is cmake outsourceDir default value -->
                  <outsourceDir>${project.basedir}/builds/Unix Makefiles/RELEASE</outsourceDir>
                  <generator>"MinGW Makefiles"</generator>
                  <commandArgs>-DPROJECT_TARGET="RELEASE" -DEXECUTABLE_NAME="SAMPLE" -DPROJECT_LANGUAGE="en" -DCMAKE_BUILD_TYPE="Release"</commandArgs>
                </configuration>
              </execution>
              <execution>
                <id>make</id>
                <!--<phase>compile</phase>-->
                <!-- compile is make goal default phase -->
                <goals>
                  <goal>make</goal>
                </goals>
                <configuration>
                  <makecommandPerOS>
                    <WindowsXP>mingw32-make</WindowsXP>
                    <Windows7>mingw32-make</Windows7>
                  </makecommandPerOS>
                  <projectDir>${project.basedir}/builds/Unix Makefiles/RELEASE</projectDir>
                </configuration>
              </execution>
              <execution>
                <id>unit-test</id>
                <!--<phase>test</phase>-->
                <!-- test is xunit goal default phase -->
                <goals>
                  <goal>xunit</goal>
                </goals>
                <configuration>
                  <executable>bash</executable>
                  <workingDir>${project.basedir}/builds/Unix Makefiles/RELEASE/bin</workingDir>
                  <commandArgs>"${project.basedir}/scripts/execUnitTest.sh" ./SAMPLE-PROJECT-TESTS "${project.basedir}/xunit-reports/xunit-result-SAMPLE.xml"</commandArgs>
                </configuration>
              </execution>
             </executions>

            <!-- main configuration node is mainly used by sonar cxx sensor -->
            <configuration>
              <!-- <sourceDirs> is used by cppcheck and veraxx goal to identify source files -->
              <!--   <sourceDirs> is also used by sonar cxx sensor to identify source files -->
              <sourceDirs>
                <sourceDir>sources/application</sourceDir>
                <sourceDir>sources/utils</sourceDir>
                <sourceDir>sources/tests</sourceDir>
              </sourceDirs>
            </configuration>

          </plugin>
        </plugins>
     </build>
    </profile>

  </profiles>
  <build>
    <!-- We have our own <configuration><sourceDirs> node inside cxx plugin configuration -->
    <sourceDirectory>sources</sourceDirectory>
  </build>
  <properties>
    <sonar.language>c</sonar.language>
    <sonar.dynamicAnalysis>reuseReports</sonar.dynamicAnalysis>
    <sonar.scm.enabled>true</sonar.scm.enabled>
    <sonar.scm.url>scm:git:https://github.com/japm94/c-helloworld.git</sonar.scm.url>

    <sonar.cxx.cppcheck.reportPath>cppcheck-reports/cppcheck-result-*.xml</sonar.cxx.cppcheck.reportPath>
    <sonar.cxx.defines>Q_OBJECT, Q_SLOTS</sonar.cxx.defines>
    <sonar.tests>sources/tests</sonar.tests>

  </properties>
</project>